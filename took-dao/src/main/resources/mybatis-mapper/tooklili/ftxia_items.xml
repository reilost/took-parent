<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tooklili.dao.intf.tooklili.ItemDao">

<select id="queryItemsByCateId" resultType="com.tooklili.model.tooklili.Item">
	select 
	id,
	cate_id as cateId,
	num_iid as numIid,
	title,
	pic_url as picUrl,
	price,
	coupon_price as couponPrice,
	quan,
	Quan_surplus as quanSurplus,
	Quan_receive as quanReceive,
	volume,
	quanurl as quanUrl,
	shop_type as shopType,
	from_unixtime(coupon_start_time,'%Y-%m-%d %H:%i:%s') as couponStartTime,
	from_unixtime(coupon_end_time,'%Y-%m-%d %H:%i:%s') as couponEndTime,
	from_unixtime(add_time,'%Y-%m-%d %H:%i:%s') as addTime,
	intro
	from ftxia_items
	<where>
		isq=1
		and coupon_end_time >= UNIX_TIMESTAMP(now())
		<if test="cateId!=null and cateId!=0">
			and cate_id=#{cateId}
		</if>
	</where>
	ORDER BY add_time DESC	
</select>

<select id="queryItemById" resultType="com.tooklili.model.tooklili.Item">
	select 
	id,
	cate_id as cardId,
	num_iid as numIid,
	title,
	pic_url as picUrl,
	price,
	coupon_price as couponPrice,
	quan,
	Quan_surplus as quanSurplus,
	Quan_receive as quanReceive,
	volume,
	quanurl as quanUrl,
	shop_type as shopType,
	from_unixtime(coupon_start_time,'%Y-%m-%d %H:%i:%s') as couponStartTime,
	from_unixtime(coupon_end_time,'%Y-%m-%d %H:%i:%s') as couponEndTime,
	from_unixtime(add_time,'%Y-%m-%d %H:%i:%s') as addTime,
	intro
	from ftxia_items
	where id=#{id}
</select>


</mapper>